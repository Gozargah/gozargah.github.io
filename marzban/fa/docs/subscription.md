---
title: سابسکریپشن
---


# سابسکریپشن

با استفاده از این آموزش می‌توانید لینک سابسکریپشن را در مرزبان فعال کنید. قابلیت سابسکریپشن در مرزبان به شما اجازه می‌دهد تا به همه کانفیگ‌های خود در کلاینت‌های مختلف دسترسی داشته باشید، همچنین در صورت اضافه یا حذف کردن اینباندها و یا ایجاد تغییر در `Host Settings`، می‌توانید با آپدیت کردن لینک سابسکریپشن به راحتی به کانفیگ‌های جدید خود دسترسی داشته باشید.

## فعال کردن لینک سابسکریپشن

`1` برای فعال کردن لینک سابسکریپشن ابتدا باید طبق آموزش [ساخت گواهی SSL]( https://gozargah.github.io/marzban/examples/issue-ssl-certificate) برای دامنه خود گواهی SSL بسازید سپس طبق آموزش [فعال‌سازی SSL در مرزبان]( https://gozargah.github.io/marzban/examples/marzban-ssl) آن را در مرزبان فعال کنید تا داشبورد مرزبان و لینک سابسکریپشن شما به صورت `https` در دسترس باشد.

`2` اگر قصد تفکیک کردن دامنه پنل و لینک سابسکریپشن را ندارید، پس از فعال‌سازی SSL لینک سابسکریپشن شما فعال خواهد بود، اما اگر می‌خواهید برای هر کدام دامنه مجزا داشته باشید لازم است که مولتی SSL بگیرید تا گواهی برای هر دو دامنه شما کار کند. همچنین در `.env` کد زیر را با برداشتن # اول آن از حالت کامنت در بیاورید، سپس ساب دامنه مورد نظر خود را برای لینک سابسکریپشن قرار دهید.

```env
XRAY_SUBSCRIPTION_URL_PREFIX = https://YOUR_DOMAIN:PORT
```

::: warning توجه 
در صورتی که برای پنل پورتی غیر از 443 تعیین کرده‌اید لازم است که پورت پنل را هم در متغیر بالا قرار دهید. همچنین اگر از ربات تلگرام استفاده می‌کنید تعیین کردن متغیر بالا ضروری است در غیر این صورت اگر لینک ساب کاربر را از طریق ربات دریافت کنید فرمت آن درست نخواهد بود.
:::

`3` در نهایت با دستور زیر مرزبان را ریستارت کنید تا تغییرات اعمال شود.

```bash
marzban restart
```

حالا لینک سابسکریپشن شما فعال شده است و پس از ساخت کاربر در پنل مرزبان می‌توانید از آن استفاده کنید.

::: tip  نکته 
برخی از متغیرهای لینک سابسکریپشن در آموزش [پیکربندی](https://gozargah.github.io/marzban/docs/configuration) توضیح داده شده‌اند. برای خواندن توضیحات آن‌ها به آموزش پیکربندی رجوع کنید.
:::

## صفحه سابسکریپشن

 صفحه سابسکریپشن به شما اجازه می‌دهد یک صفحه دلخواه برای قرار دادن کلاینت‌های مختلف در خصوص سیستم عامل‌های مختلف و آموزش‌های مربوط به آن‌ها داشته باشید. یک نمونه صفحه سابسکریپشن که توسط یکی از اعضای کامیونیتی مرزبان توسعه داده شده در ادامه معرفی شده است.

`1` با دستور زیر قالب صفحه سابسکریپشن را دانلود کنید.

```bash
sudo wget -N -P /var/lib/marzban/templates/subscription/  https://raw.githubusercontent.com/x0sina/marzban-sub/main/index.html
```

`2` بعد مقادیر زیر را در فایل `.env` در پوشه /opt/marzban/ با پاک کردن # اول آن‌ها از حالت کامنت در بیاورید.

```env
CUSTOM_TEMPLATES_DIRECTORY="/var/lib/marzban/templates/"
SUBSCRIPTION_PAGE_TEMPLATE="subscription/index.html"
```

`3` در نهایت با دستور زیر مرزبان را ریستارت کنید تا تغییرات اعمال شود.

```bash
marzban restart
```

حالا کافی‌ست لینک سابسکریپشن یکی از کاربر‌ها را در مرورگر وارد کنید تا صفحه سابسکریپشن برای شما نمایش داده شود.
