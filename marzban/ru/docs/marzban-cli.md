---
title: CLI
---

# Команды Marzban

Marzban предоставляет ряд команд для управления экземпляром приложения.
Ниже приведен подробный обзор доступных команд.

## Команды

### `up`

Запускает все необходимые сервисы приложения.

Используйте эту команду для инициализации всех компонентов Marzban.

```bash
sudo marzban up
```

### `down`

Останавливает все запущенные сервисы.

Это безопасный способ остановить все процессы, связанные с Marzban.

```bash
sudo marzban down
```

### `restart`

Перезапускает все сервисы.

Эта команда полезна для применения изменений в конфигурации.

```bash
sudo marzban restart
```

### `status`

Отображает текущий статус всех сервисов приложения.

Используйте эту команду, чтобы проверить, активны ли нужные сервисы.

```bash
sudo marzban status
```

### `logs`

Показывает логи для всех сервисов.

Это может быть полезно для отладки и поиска причин возможных проблем.

```bash
sudo marzban logs
```

### `cli`

Предоставляет доступ к интерфейсу командной строки Marzban для выполнения специфических задач.

```bash
sudo marzban cli
```

### `install`

Выполняет установку Marzban на вашей системе.

Эта команда готовит все необходимое для запуска приложения.

```bash
sudo marzban install
```

### `update`

Обновляет приложение до последней версии.

Рекомендуется выполнять обновление регулярно, чтобы использовать последние функции и исправления.

```bash
sudo marzban update
```

### `uninstall`

Удаляет Marzban из вашей системы.

```bash
sudo marzban uninstall
```

## CLI

**Использование**:

```console
$ [ОПЦИИ] КОМАНДА [АРГУМЕНТЫ]...
```

**Опции**:

- `--help`: Показать это сообщение и выйти.

**Команды**:

- `admin`
- `subscription`
- `user`

### `admin`

**Использование**:

```console
$ admin [ОПЦИИ] КОМАНДА [АРГУМЕНТЫ]...
```

**Опции**:

- `--help`: Показать это сообщение и выйти.

**Команды**:

- `create`: Создает админа
- `delete`: Удаляет указанного админа
- `import-from-env`: Импортирует суперадмина из переменных окружения
- `list`: Отображает таблицу админов
- `update`: Обновляет указанного админа

#### `admin create`

Создает админа

Пароль также может быть установлен через переменную окружения `MARZBAN_ADMIN_PASSWORD` для использования без взаимодействия с пользователем.

**Использование**:

```console
$ admin create [ОПЦИИ]
```

**Опции**:

- `-u, --username TEXT`: [обязательно]
- `--sudo / --no-sudo`
- `--help`: Показать это сообщение и выйти.

#### `admin delete`

Удаляет указанного админа

Подтверждение можно пропустить с помощью опции `--yes/-y`.

**Использование**:

```console
$ admin delete [ОПЦИИ]
```

**Опции**:

- `-u, --username TEXT`: [обязательно]
- `-y, --yes`: Пропускает подтверждения
- `--help`: Показать это сообщение и выйти.

#### `admin import-from-env`

Импортирует суперадмина из переменных окружения

Подтверждение можно пропустить с помощью опции `--yes/-y`.

Что делает эта команда?

- Создает суперадмина согласно `SUDO_USERNAME` и `SUDO_PASSWORD`.
- Связывает любого пользователя, у которого нет `admin_id`, с импортированным суперадмином.

**Использование**:

```console
$ admin import-from-env [ОПЦИИ]
```

**Опции**:

- `-y, --yes`: Пропускает подтверждения
- `--help`: Показать это сообщение и выйти.

#### `admin list`

Отображает таблицу админов

**Использование**:

```console
$ admin list [ОПЦИИ]
```

**Опции**:

- `-o, --offset INTEGER`
- `-l, --limit INTEGER`
- `-u, --username TEXT`: Поиск по имени пользователя
- `--help`: Показать это сообщение и выйти.

#### `admin update`

Обновляет указанного админа

ПРИМЕЧАНИЕ: Эту команду НЕЛЬЗЯ использовать в режиме без взаимодействия с пользователем.

**Использование**:

```console
$ admin update [ОПЦИИ]
```

**Опции**:

- `-u, --username TEXT`: [обязательно]
- `--help`: Показать это сообщение и выйти.

### `subscription`

**Использование**:

```console
$ subscription [ОПЦИИ] КОМАНДА [АРГУМЕНТЫ]...
```

**Опции**:

- `--help`: Показать это сообщение и выйти.

**Команды**:

- `get-config`: Генерирует конфигурацию подписки.
- `get-link`: Выводит ссылку на подписку указанного пользователя.

#### `subscription get-config`

Генерирует конфигурацию подписки.

Генерирует конфигурацию подписки для указанного пользователя в указанном формате.

Выходные данные будут записаны в выходной файл, если указан `output-file`,
в противном случае будут показаны в терминале.

**Использование**:

```console
$ subscription get-config [ОПЦИИ]
```

**Опции**:

- `-u, --username TEXT`: [обязательно]
- `-f, --format [v2ray|clash]`: [обязательно]
- `-o, --output TEXT`: Записывает сгенерированную конфигурацию в файл, если указано
- `--base64`: Кодирует выходные данные в формате base64, если указано
- `--help`: Показать это сообщение и выйти.

#### `subscription get-link`

Выводит ссылку на подписку указанного пользователя.

ПРИМЕЧАНИЕ: Для корректной работы этой команды необходимо установить переменную окружения `XRAY_SUBSCRIPTION_URL_PREFIX`.

**Использование**:

```console
$ subscription get-link [ОПЦИИ]
```

**Опции**:

- `-u, --username TEXT`: [обязательно]
- `--help`: Показать это сообщение и выйти.

### `user`

**Использование**:

```console
$ user [ОПЦИИ] КОМАНДА [АРГУМЕНТЫ]...
```

**Опции**:

- `--help`: Показать это сообщение и выйти.

**Команды**:

- `list`: Отображает таблицу пользователей
- `set-owner`: Передает право владения пользователя

#### `user list`

Отображает таблицу пользователей

ПРИМЕЧАНИЕ: В настоящее время сортировка недоступна.

**Использование**:

```console
$ user list [ОПЦИИ]
```

**Опции**:

- `-o, --offset INTEGER`
- `-l, --limit INTEGER`
- `-u, --username TEXT`: Поиск по имени пользователя
- `--status [active|disabled|limited|expired]`
- `--admin, --owner TEXT`: Поиск по имени админа-владельца
- `--help`: Показать это сообщение и выйти.

#### `user set-owner`

Передает право владения пользователя

ПРИМЕЧАНИЕ: Эта команда требует дополнительного подтверждения для пользователей, у которых уже есть владелец.

**Использование**:

```console
$ user set-owner [ОПЦИИ]
```

**Опции**:

- `-u, --username TEXT`
- `--admin, --owner TEXT`: Имя пользователя админа
- `-y, --yes`: Пропускает подтверждения
- `--help`: Показать это сообщение и выйти.
