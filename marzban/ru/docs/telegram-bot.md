---
title: Telegram-бот
---

# Telegram-бот

С помощью этого руководства вы можете настроить Telegram-бота Marzban, чтобы управлять своими пользователями не только через панель Marzban, но и через Telegram-бота. Некоторые функции Telegram-бота включают:

- Подробная статистика панели, включая объем загрузки и выгрузки, мгновенную скорость загрузки и выгрузки
- Возможность вносить изменения для всех пользователей, такие как добавление или уменьшение количества дней или установленного объема
- Удаление всех истекших пользователей или пользователей, у которых закончился объем трафика
- Снятие отметки с определенного входящего соединения или установка отметки для всех пользователей
- Создание пользователя через предустановленный шаблон
- Просмотр последнего User-Agent ссылки на подписку пользователя
- Перезапуск `Xray`

## Настройка 

`1` Вам нужно создать бота через [BotFather](https://t.me/BotFather), затем скопировать токен бота для использования на следующем шаге.

`2` Поскольку доступ к этому боту будет только у вас или ограниченного списка администраторов, вам нужно указать Telegram ID людей, которым разрешено его использовать. Чтобы получить свой Telegram ID, обратитесь к боту [UserInfoBot](https://t.me/userinfobot). 

::: tip Примечание 
Если вы хотите, чтобы логи панели были отдельными, создайте канал, отправьте в нем сообщение и перешлите это сообщение тому же боту, который упоминался на втором шаге, чтобы получить ID канала. Чтобы логи отправлялись в канал, Telegram-бот должен быть участником канала и иметь права администратора.
:::

`3` Теперь вам нужно указать переменные в Marzban. Для этого раскомментируйте переменные в файле `env`, удалив `#` в начале, и установите требуемые значения в файле.


| Переменные     |            Назначение            |
|----------------:|-----------------------------:|
| `TELEGRAM_API_TOKEN`           | Токен Telegram-бота|       
| `TELEGRAM_ADMIN_ID`|Числовой ID администратора в Telegram (если нужен доступ нескольким администраторам к боту, укажите их ID через запятую)|
| `TELEGRAM_LOGGER_CHANNEL_ID` | Числовой ID канала для логов панели при желании        |  
| `TELGRAM_DEFAULT_VLESS_FLOW`  | Установка Flow по умолчанию для протокола Vless в Telegram-боте |    
| `TELEGRAM_PROXY_URL`       | Запуск бота через прокси (если серверы Telegram заблокированы на вашем сервере) |

`4` Затем перезапустите Marzban следующей командой, чтобы применить изменения:
  ```bash
  marzban restart
  ```
- Наконец, введя команду `/start`, бот будет доступен для вас. 