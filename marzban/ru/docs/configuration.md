---
title: Конфигурация
---

# Конфигурация

- На этой странице вы найдете список всех переменных окружения Marzban. Вы можете установить все эти переменные в файле `.env`.

::: tip Расположение файла `.env` при быстрой установке
Если вы установили Marzban с помощью быстрой установки, файл `.env` находится в директории `/opt/marzban/.env`.
:::

## UVICORN_HOST
- Значение по умолчанию: `0.0.0.0`
- Назначение:
IP-адрес, на котором будет запущен Marzban.

::: tip Примечание
`0.0.0.0` означает все доступные адреса машины.
:::

## UVICORN_PORT
- Значение по умолчанию: `8000`
- Назначение:
Порт, на котором будет запущен Marzban.

## ALLOWED_ORIGINS
- Значение по умолчанию: `http://localhost,http://localhost:8000,http://example.com`
- Назначение:
Определение доменов, которые будут иметь доступ к панели управления.
- Если вы разделили домен для ссылок подписки и домен панели управления, панель будет доступна с обоих доменов, но с помощью этой переменной вы можете точно определить, какой домен или поддомен будет иметь доступ к панели управления.

## UVICORN_UDS
- Назначение:
Адрес `unix domain socket`, на котором будет запущен Marzban.

::: tip Примечание
При установке этого значения переменные `UVICORN_HOST` и `UVICORN_PORT` игнорируются.
:::

## UVICORN_SSL_CERTFILE
- Назначение:
Путь к файлу сертификата `SSL`

- (Пример: `/path/to/example.com/fullchain.pem`)

## UVICORN_SSL_KEYFILE
- Назначение:
Путь к файлу ключа `SSL`

- (Пример: `/path/to/example.com/key.pem`)

## DASHBOARD_PATH
- Назначение:
Путь к панели управления

- (Пример: `/TED/`)

## XRAY_JSON
- Значение по умолчанию: `xray_config.json`
- Назначение:
Путь к файлу конфигурации `Xray` в формате `Json`

## XRAY_SUBSCRIPTION_URL_PREFIX
- Назначение:
Префикс URL для ссылок подписки

::: warning Внимание
Если эта переменная не установлена, ссылки подписки не будут правильно отправляться в Telegram-боте.
:::

## XRAY_SUBSCRIPTION_PATH
- Значение по умолчанию: `sub`
- Назначение:
Путь для ссылок подписки

## XRAY_EXECUTABLE_PATH
- Значение по умолчанию: `/usr/local/bin/xray`
- Назначение:
Путь к исполняемому файлу `Xray`

## XRAY_ASSETS_PATH
- Значение по умолчанию: `/usr/local/share/xray`
- Назначение:
Путь к директории с файлами `Asset` для `Xray` (файлы `geoip.dat` и `geosite.dat`)

## XRAY_EXCLUDE_INBOUND_TAGS
- Назначение:
Теги `Inbound`, которые не требуют управления и не должны отображаться в списке прокси.

- (Пример: `"IBOUND_X INBOUND_Y INBOUND_Z"`)

## XRAY_FALLBACKS_INBOUND_TAG
- Назначение:
Если вы используете `Inbound` с несколькими `Fallback`, укажите здесь его тег.

## TELEGRAM_API_TOKEN
- Назначение:
Токен Telegram-бота (получить у [@botfather](https://t.me/botfather))

## TELEGRAM_ADMIN_ID
- Назначение:
Числовой ID администратора в Telegram (получить у [@userinfobot](https://t.me/userinfobot))

## TELEGRAM_LOGGER_CHANNEL_ID
- Назначение:
Числовой ID канала для логов Telegram-бота

- При установке этого значения логи Telegram-бота будут отправляться в этот канал. Бот Marzban должен быть администратором в этом канале.

## TELEGRAM_DEFAULT_VLESS_FLOW
- Назначение:
Установка `Flow` по умолчанию для протокола `Vless` в Telegram-боте

- (Пример: `"xtls-rprx-vision"`)

## TELEGRAM_PROXY_URL
- Назначение:
Для запуска Telegram-бота через прокси (если серверы Telegram заблокированы на вашем сервере)

- (Пример: `"socks5://127.0.0.1:1080"`)

## DISCORD_WEBHOOK_URL
- Назначение:
URL для Discord webhook

## CUSTOM_TEMPLATES_DIRECTORY
- Значение по умолчанию: `app/templates`
- Назначение:
Директория с файлами шаблонов

## CLASH_SUBSCRIPTION_TEMPLATE
- Значение по умолчанию: `clash/default.yml`
- Назначение:
Шаблон для генерации конфигураций `Clash`

- (Пример: [default.yml](https://github.com/Gozargah/Marzban/blob/master/app/templates/clash/default.yml))

## SUBSCRIPTION_PAGE_TEMPLATE
- Значение по умолчанию: `subscription/index.html`
- Назначение:
Шаблон для страницы информации о подписке

- (Пример: [index.html](https://github.com/Gozargah/Marzban/blob/master/app/templates/subscription/index.html))

## HOME_PAGE_TEMPLATE
- Значение по умолчанию: `home/index.html`
- Назначение:
Шаблон для главной страницы

- (Пример: [index.html](https://github.com/Gozargah/Marzban/blob/master/app/templates/home/index.html))

## V2RAY_SUBSCRIPTION_TEMPLATE
- Значение по умолчанию: `"v2ray/default.json"`
- Назначение:
Шаблон для пользовательской конфигурации

## V2RAY_SETTINGS_TEMPLATE
- Значение по умолчанию: `"v2ray/settings.json"`
- Назначение:
Настройки шаблона пользовательской конфигурации

## SINGBOX_SUBSCRIPTION_TEMPLATE
- Значение по умолчанию: `"singbox/default.json"`
- Назначение:
Шаблон для клиента `SingBox`

## SINGBOX_SETTINGS_TEMPLATE
- Значение по умолчанию: `"singbox/settings.json"`
- Назначение:
Настройки шаблона `SingBox`

## MUX_TEMPLATE
- Значение по умолчанию: `"mux/default.json"`
- Назначение:
Настройки `MUX` для пользовательской конфигурации

## USE_CUSTOM_JSON_DEFAULT=True
- Назначение:
Включение пользовательской конфигурации для использования переменных `Fragment`, `Mux`, `Noise`

Если эта переменная установлена в `True`, следующие три переменные будут по умолчанию `True`:

`USE_CUSTOM_JSON_FOR_V2RAYN`

`USE_CUSTOM_JSON_FOR_V2RAYNG`

`USE_CUSTOM_JSON_FOR_STREISAND`

## USE_CUSTOM_JSON_FOR_V2RAYN=False
- Назначение:
Включение пользовательской конфигурации для клиента `v2rayN`

## USE_CUSTOM_JSON_FOR_V2RAYNG=True
- Назначение:
Включение пользовательской конфигурации для клиента `v2rayNG`

## USE_CUSTOM_JSON_FOR_STREISAND=False
- Назначение:
Включение пользовательской конфигурации для клиента `Streisand`

## SUB_PROFILE_TITLE
- Значение по умолчанию: `Subscription`
- Назначение:
Заголовок подписки в клиенте

- Если клиент поддерживает эту функцию и пользователь не выбрал заголовок для подписки, будет использовано это значение.

## SUB_SUPPORT_URL
- Назначение:
URL для связи с поддержкой в ссылке подписки

- (Пример: `"https://t.me/support"`)

## SUB_UPDATE_INTERVAL
- Значение по умолчанию: `12`
- Назначение:
Интервал между автоматическими обновлениями подписки (в часах)

- Если клиент поддерживает эту функцию, подписка будет обновляться каждые `12` часов.

## EXTERNAL_CONFIG
- Значение по умолчанию: `"config://..."`
- Назначение:
Добавление внешнего прокси в формате `v2ray`. Можно добавить только `1` прокси, который будет отображаться в конце списка прокси.

## ACTIVE_STATUS_TEXT
- Значение по умолчанию: `"Active"`
- Назначение:
Установка пользовательского текста для активного статуса пользователя в `Host Settings`

## EXPIRED_STATUS_TEXT
- Значение по умолчанию: `"Expired"`
- Назначение:
Установка пользовательского текста для истекшего статуса пользователя в `Host Settings`

## LIMITED_STATUS_TEXT
- Значение по умолчанию: `"Limited"`
- Назначение:
Установка пользовательского текста для ограниченного статуса пользователя в `Host Settings`

## DISABLED_STATUS_TEXT
- Значение по умолчанию: `"Disabled"`
- Назначение:
Установка пользовательского текста для отключенного статуса пользователя в `Host Settings`

## ONHOLD_STATUS_TEXT
- Значение по умолчанию: `"On-Hold"`
- Назначение:
Установка пользовательского текста для статуса ожидания подключения пользователя в `Host Settings`

## USERS_AUTODELETE_DAYS
- Значение по умолчанию: `-1`

- Чтобы отключить эту переменную, добавьте `#` в начало или установите отрицательное значение.

- Назначение:
Автоматическое удаление пользователей после указанного количества дней с момента истечения срока действия

## USER_AUTODELETE_INCLUDE_LIMITED_ACCOUNTS
- Назначение:
Автоматическое удаление пользователей после указанного количества дней с момента достижения ограничения трафика

## NOTIFY_STATUS_CHANGE
- Значение по умолчанию: `True`
- Назначение:
Включение/отключение уведомлений об изменении статуса пользователя в Telegram-боте

## NOTIFY_USER_CREATED
- Значение по умолчанию: `True`
- Назначение:
Включение/отключение уведомлений о создании пользователя в Telegram-боте

## NOTIFY_USER_UPDATED
- Значение по умолчанию: `True`
- Назначение:
Включение/отключение уведомлений об обновлении данных пользователя в Telegram-боте

## NOTIFY_USER_DELETED
- Значение по умолчанию: `True`
- Назначение:
Включение/отключение уведомлений об удалении пользователя в Telegram-боте

## NOTIFY_USER_DATA_USED_RESET
- Значение по умолчанию: `True`
- Назначение:
Включение/отключение уведомлений о сбросе использованного трафика пользователя в Telegram-боте

## NOTIFY_USER_SUB_REVOKED
- Значение по умолчанию: `True`
- Назначение:
Включение/отключение уведомлений об изменении ссылки подписки пользователя в Telegram-боте

## NOTIFY_IF_DATA_USAGE_PERCENT_REACHED
- Значение по умолчанию: `True`
- Назначение:
Включение/отключение уведомлений о приближении к лимиту трафика для webhook. По умолчанию уведомления отправляются для пользователей, использовавших `80%` своего трафика.

## NOTIFY_REACHED_USAGE_PERCENT
- Значение по умолчанию: `80,90`
- Назначение:
Установка процентов использования трафика для отправки уведомлений через webhook. Если указано два числа, уведомления будут отправлены когда использовано `80%` и `90%` трафика. Количество значений не ограничено, разделяйте их запятыми.
- Помните, что для работы этой переменной нужно сначала включить:

`NOTIFY_IF_DATA_USAGE_PERCENT_REACHED`

## NOTIFY_IF_DAYS_LEFT_REACHED
- Значение по умолчанию: `True`
- Назначение:
Включение/отключение уведомлений о приближении к концу срока действия для webhook. По умолчанию уведомления отправляются для пользователей, у которых осталось `3` дня.

## NOTIFY_DAYS_LEFT
- Значение по умолчанию: `3,7`
- Назначение:
Установка количества оставшихся дней для отправки уведомлений через webhook. Если указано два числа, уведомления будут отправлены когда останется `7` и `3` дня. Количество значений не ограничено, разделяйте их запятыми.
- Помните, что для работы этой переменной нужно сначала включить:

`NOTIFY_IF_DAYS_LEFT_REACHED`

## NOTIFY_LOGIN
- Значение по умолчанию: `True`
- Назначение:
Включение/отключение уведомлений о входе в панель управления в Telegram-боте

## SQLALCHEMY_DATABASE_URL
- Значение по умолчанию: `sqlite:///db.sqlite3`
- Назначение:
URL базы данных в формате `SQLAlchemy`

::: tip Руководство
Формат и доступные драйверы для URL базы данных можно найти в [документации SQLAlchemy](https://docs.sqlalchemy.org/en/20/core/engines.html#database-urls).
:::

## SQLALCHEMY_POOL_SIZE
- Значение по умолчанию: `10`
- Назначение:
Количество неактивных соединений в пуле базы данных, которые создаются при запуске приложения.

## SQLIALCHEMY_MAX_OVERFLOW
- Значение по умолчанию: `30`
- Назначение:
Максимальное количество дополнительных соединений, которые могут быть созданы сверх `POOL_SIZE`. После использования эти соединения закрываются и удаляются из пула.

## JOB_CORE_HEALTH_CHECK_INTERVAL
- Значение по умолчанию: `10`
- Назначение:
Интервал в секундах для проверки работоспособности ядер. Если ядро не работает, оно будет перезапущено.

## JOB_RECORD_NODE_USAGES_INTERVAL
- Значение по умолчанию: `30`
- Назначение:
Интервал для расчета использования трафика узлами

## JOB_RECORD_USER_USAGES_INTERVAL
- Значение по умолчанию: `10`
- Назначение:
Интервал в секундах для проверки и расчета использования трафика пользователями.

## JOB_REVIEW_USERS_INTERVAL
- Значение по умолчанию: `10`
- Назначение:
Интервал в секундах для проверки пользователей. Если срок действия истек или трафик исчерпан, пользователь будет ограничен или отключен.

## JOB_SEND_NOTIFICATIONS_INTERVAL
- Значение по умолчанию: `30`
- Назначение:
Интервал в секундах для проверки и отправки очереди уведомлений через webhook.

## WEBHOOK_ADDRESS
- Значение по умолчанию: `DEFAULT`

## WEBHOOK_SECRET
- Значение по умолчанию: `DEFAULT`

## SUDO_USERNAME
::: warning Внимание
Настоятельно рекомендуется использовать marzban cli для создания администратора вместо этой переменной.
:::
- Назначение:
Вы можете установить имя пользователя главного администратора через переменную окружения.

## SUDO_PASSWORD
::: warning Внимание
Настоятельно рекомендуется использовать marzban cli для создания администратора вместо этой переменной.
:::
- Назначение:
Вы можете установить пароль главного администратора через переменную окружения.

## DOCS
- Значение по умолчанию: `false`
- Назначение:
Включение документации `API` по адресам `/docs` и `/redoc`

## DEBUG
- Значение по умолчанию: `false`
- Назначение:
Включение режима разработки (development)

## JWT_ACCESS_TOKEN_EXPIRE_MINUTES
- Значение по умолчанию: `1440`
- Назначение:
Время истечения токена доступа в минутах

::: tip Примечание
`0` означает 'без истечения срока'.
:::

## VITE_BASE_API
- Значение по умолчанию: `/api/`
- Назначение:
Префикс пути `API` для использования в панели управления (front-end) 