---
title: Подписка
---


# Подписка

С помощью этого руководства вы можете активировать ссылку на подписку в Marzban. Функция подписки в Marzban позволяет вам получить доступ ко всем вашим конфигурациям в различных клиентах, а также при добавлении или удалении входящих соединений или внесении изменений в `Host Settings`, вы можете легко получить доступ к новым конфигурациям, обновив ссылку на подписку.

## Активация ссылки на подписку

`1` Для активации ссылки на подписку сначала необходимо создать SSL-сертификат для вашего домена, следуя руководству [Создание SSL-сертификата](https://gozargah.github.io/marzban/examples/issue-ssl-certificate), затем активировать его в Marzban, следуя руководству [Активация SSL в Marzban](https://gozargah.github.io/marzban/examples/marzban-ssl), чтобы панель управления Marzban и ссылка на подписку были доступны через `https`.

`2` Если вы не планируете разделять домен панели и ссылку на подписку, после активации SSL ваша ссылка на подписку будет активна. Однако если вы хотите иметь отдельный домен для каждого, вам нужно получить мульти-SSL, чтобы сертификат работал для обоих доменов. Также в файле `.env` раскомментируйте следующий код, удалив # в начале, затем укажите нужный поддомен для ссылки на подписку.

```env
XRAY_SUBSCRIPTION_URL_PREFIX = https://YOUR_DOMAIN:PORT
```

::: warning Внимание 
Если вы установили для панели порт, отличный от 443, необходимо также указать порт панели в вышеуказанной переменной. Кроме того, если вы используете Telegram-бота, установка этой переменной обязательна, иначе если вы получите ссылку на подписку пользователя через бота, ее формат будет неправильным.
:::

`3` Наконец, перезапустите Marzban следующей командой, чтобы применить изменения:

```bash
marzban restart
```

Теперь ваша ссылка на подписку активирована, и вы можете использовать ее после создания пользователя в панели Marzban.

::: tip Примечание 
Некоторые переменные ссылки на подписку объяснены в руководстве [Конфигурация](https://gozargah.github.io/marzban/docs/configuration). Обратитесь к руководству по конфигурации для чтения их описаний.
:::

## Страница подписки

Страница подписки позволяет вам иметь пользовательскую страницу для размещения различных клиентов для разных операционных систем и соответствующих инструкций. Ниже представлен пример страницы подписки, разработанной одним из членов сообщества Marzban.

`1` Загрузите шаблон страницы подписки следующей командой:

```bash
sudo wget -N -P /var/lib/marzban/templates/subscription/  https://raw.githubusercontent.com/x0sina/marzban-sub/main/index.html
```

`2` Затем раскомментируйте следующие значения в файле `.env` в папке /opt/marzban/, удалив # в начале:

```env
CUSTOM_TEMPLATES_DIRECTORY="/var/lib/marzban/templates/"
SUBSCRIPTION_PAGE_TEMPLATE="subscription/index.html"
```

`3` Наконец, перезапустите Marzban следующей командой, чтобы применить изменения:

```bash
marzban restart
```

Теперь достаточно ввести ссылку на подписку одного из пользователей в браузере, чтобы увидеть страницу подписки. 